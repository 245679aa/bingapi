<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MD5 Encryptor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1-crypto-js.js"></script> <!-- 引入 CryptoJS -->
</head>
<body>
    <h1>MD5 Encryptor</h1>
    <form id="md5-form">
        <label for="input-text">Enter Text:</label>
        <input type="text" id="input-text" name="input-text" required>
        <button type="submit">Encrypt</button>
    </form>

    <h2>Encrypted Data:</h2>
    <pre id="encrypted-result"></pre>

    <script>
        document.getElementById('md5-form').addEventListener('submit', async (event) => {
            event.preventDefault();

            const inputText = document.getElementById('input-text').value;

            // 确保 CryptoJS 库已加载
            const md5Hash = CryptoJS.MD5(inputText).toString();

            // 显示加密后的结果
            document.getElementById('encrypted-result').textContent = md5Hash;

            // 将数据发送到后端
            await fetch('/api/save', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    original: inputText,
                    encrypted: md5Hash,
                    added_time: new Date().toISOString(),
                    ip_address: '',  // 留空
                    mac_address: '', // 留空
                    count: 9999
                })
            });
        });
    </script>
</body>
</html>
